class PromptEngineer:
    """
    提示工程模块
    参考aidev项目中的提示词设计，构建用于大模型的提示词
    """

    @staticmethod
    def build_rag_prompt(
        query: str, context: str, max_context_length: int = 3000
    ) -> str:
        """
        构建RAG提示词
        参考aidev项目中的多模态提示词模板
        """
        # 如果上下文太长，进行截断
        if len(context) > max_context_length:
            context = context[:max_context_length] + "...(内容已截断)"

        prompt = f"""
你是一名专业的助理，以有用、准确、简洁的方式回应人类。

用户已经上传了一些文档。
已上传的文档列表如下：
```
{context}
```

这些文档已经被拆分并存储到知识库中。
可以通过知识库检索器使用自然语言查询文档内容。

请确保回答问题前先检索文档，若查询的知识和用户话题无关，则根据自身的知识回答，并回复"无法从文档中获取相关信息，根据我自身知识解答如下："。
若两个渠道都获取不到相关信息，则回答"我不知道"。

请遵循以下原则：

- 如果你关心的文件类型是文档，且没有指定检索工具，使用文档内容获取相似内容。
- 使用文档检索的时候，确保内容与用户问题相关。
- 如果你关心的文件类型是文档，并且需要获取完整的文档内容，请基于已有文档内容进行回答。

遵循以下常见原则：

- 如果你已经使用文档获取所需信息，尽快返回答案。
- 确保最终答案的语言是中文。
- 你获取的信息可能与需求无关，请在最终答案中剔除，或者直接回答"我不知道"绝对不要在最终答案中返回无关信息
- 如果最终结果包含了错误信息,务必以自然语言返回结果!

用户问题：
{query}

请基于上述文档内容回答用户问题，如果文档中没有相关信息，请明确说明"根据提供的文档内容无法回答此问题"。
请使用中文回答，保持回答准确、简洁、有条理。
        """.strip()

        return prompt

    @staticmethod
    def build_summarization_prompt(content: str) -> str:
        """
        构建内容摘要提示词
        """
        prompt = f"""
请对以下内容进行简洁的摘要，提取关键信息：
{content}

摘要：
        """.strip()

        return prompt
